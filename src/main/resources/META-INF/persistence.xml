<?xml version="1.0" encoding="UTF-8"?> <!-- Declaración XML estándar -->

<!-- Raíz del archivo de configuración de JPA -->
<persistence xmlns="https://jakarta.ee/xml/ns/persistence"
             version="3.1"> <!-- Versión de Jakarta Persistence (3.1 es la más reciente) -->

    <!-- Definición de una unidad de persistencia -->
    <persistence-unit name="ventaautosPU" transaction-type="RESOURCE_LOCAL">
        <!-- Nombre de la unidad de persistencia: "ventaautosPU"
             transaction-type="RESOURCE_LOCAL" significa que las transacciones se gestionan de forma local,
             sin servidor de aplicaciones (lo normal en proyectos con JDBC y Hibernate). -->

        <!-- Proveedor JPA que se usará (Hibernate en este caso) -->
        <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>

        <!-- Entidad que Hibernate debe mapear a la base de datos -->
        <class>org.example.model.Automovil</class>
        <!-- Puedes añadir más entidades con más etiquetas <class> -->

        <!-- Configuración de propiedades -->
        <properties>

            <!-- Conexión a la base de datos -->
            <property name="jakarta.persistence.jdbc.url"
                      value="jdbc:mysql://iasanz.synology.me:3306/ccrp06_concesionario?useSSL=false"/>
            <!-- Dirección JDBC:
                 - jdbc:mysql → motor de base de datos
                 - iasanz.synology.me → servidor
                 - 3306 → puerto por defecto de MySQL/MariaDB
                 - ccrp06_concesionario → nombre de la base de datos
                 - useSSL=false → desactiva SSL -->

            <property name="jakarta.persistence.jdbc.user" value=" USUARIO "/> <!-- Usuario de la BD -->
            <property name="jakarta.persistence.jdbc.password" value=" CLAVE "/> <!-- Contraseña -->
            <property name="jakarta.persistence.jdbc.driver" value="com.mysql.cj.jdbc.Driver"/> <!-- Driver JDBC -->

            <!-- Dialecto de Hibernate (instrucciones SQL adaptadas a MariaDB/MySQL) -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.MariaDBDialect"/>

            <!-- Estrategia de creación/actualización de tablas:
                 - create → crea las tablas (borra datos existentes)
                 - update → actualiza el esquema sin borrar datos
                 - validate → solo valida que coincidan las entidades con las tablas
                 - none → no hace nada -->
            <property name="hibernate.hbm2ddl.auto" value="update"/>

            <!-- Mostrar en consola las sentencias SQL que ejecuta Hibernate -->
            <property name="hibernate.show_sql" value="true"/>

            <!-- Formatear el SQL mostrado para que sea más legible -->
            <property name="hibernate.format_sql" value="true"/>

        </properties>
    </persistence-unit>
</persistence>

